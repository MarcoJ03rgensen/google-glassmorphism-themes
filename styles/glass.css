/* GLASSMORPHISM & ANIMATION THEMES */

:root {
  /* Default Ocean Theme */
  --bg-top: #004d7a;
  --bg-bottom: #001f3f;
  --glass-panel: rgba(255, 255, 255, 0.1);
  --glass-border: rgba(255, 255, 255, 0.15);
  --text-main: #e2e8f0;
  --text-muted: #94a3b8;
  --accent: #38bdf8;
  --radius: 16px;
  --blur: 16px;
  --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

/* Apple Frost Theme */
html[data-theme="apple"] {
  --bg-top: #f5f5f7;
  --bg-bottom: #e0e0e2;
  --glass-panel: rgba(255, 255, 255, 0.65);
  --glass-border: rgba(255, 255, 255, 0.4);
  --text-main: #1d1d1f;
  --text-muted: #86868b;
  --accent: #0071e3;
  --radius: 18px;
  --blur: 20px;
  --shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
}

/* Neon Night Theme */
html[data-theme="neon"] {
  --bg-top: #0f0c29;
  --bg-bottom: #302b63;
  --glass-panel: rgba(20, 10, 40, 0.6);
  --glass-border: rgba(139, 92, 246, 0.3);
  --text-main: #fff;
  --text-muted: #c4b5fd;
  --accent: #a78bfa;
  --radius: 12px;
  --blur: 12px;
  --shadow: 0 0 20px rgba(139, 92, 246, 0.2);
}

/* BACKGROUND LAYERS */
#glass-extension-bg {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -2;
  background: linear-gradient(180deg, var(--bg-top) 0%, var(--bg-bottom) 100%);
  overflow: hidden;
  pointer-events: none;
}

.light-rays {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    60deg,
    rgba(255, 255, 255, 0.05) 0px,
    rgba(255, 255, 255, 0.05) 40px,
    transparent 40px,
    transparent 120px
  );
  filter: blur(25px);
  opacity: 0.5;
  animation: raysMove 20s infinite linear;
}

@keyframes raysMove {
  from { transform: translateX(-15%) skewX(-5deg); }
  to { transform: translateX(15%) skewX(5deg); }
}

.bubble {
  position: absolute;
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 50%;
  pointer-events: none;
  animation: rise var(--d) linear infinite;
  bottom: -50px; 
}

@keyframes rise {
  0% { transform: translateY(0) scale(0); opacity: 0; }
  10% { opacity: 0.4; }
  90% { opacity: 0.4; }
  100% { transform: translateY(-110vh) scale(1.5); opacity: 0; }
}

/* BELUGA ANIMATIONS */
/* Wrapper: Handles horizontal movement and the flip (scaleX) */
.beluga-wrapper {
    position: fixed;
    top: 20%; /* Adjusted for background visibility */
    left: -450px;
    width: 380px;
    height: auto;
    z-index: -1; /* Behind search results, in front of background */
    animation: swimCycle 55s linear infinite;
    filter: drop-shadow(0 25px 45px rgba(0,0,0,0.6));
    pointer-events: none;
}

@keyframes swimCycle {
    /* Lap 1: Left to Right. Flipped (scaleX -1) to face right. */
    0% { left: -450px; transform: scaleX(-1); opacity: 0; }
    2% { opacity: 1; }
    45% { left: 110vw; transform: scaleX(-1); opacity: 1; }
    47% { left: 110vw; opacity: 0; }
    
    /* Flip and prepare for Lap 2 */
    50% { left: 110vw; transform: scaleX(1); opacity: 0; }
    52% { opacity: 1; }
    
    /* Lap 2: Right to Left. Normal scale (scaleX 1) to face left. */
    95% { left: -450px; transform: scaleX(1); opacity: 1; }
    97% { left: -450px; opacity: 0; }
    100% { left: -450px; transform: scaleX(-1); opacity: 0; }
}

/* Inner Mover: Handles vertical bobbing and tilting */
.beluga-mover {
    animation: organicSwimMotion 12s ease-in-out infinite;
}

@keyframes organicSwimMotion {
    0%, 100% { transform: translateY(-50px) rotate(-8deg); }
    50% { transform: translateY(50px) rotate(8deg); }
}

.beluga-svg {
    width: 100%;
    height: auto;
    overflow: visible;
}

/* Body Undulation */
.body-path {
    animation: bodyUndulate 3s ease-in-out infinite;
}

@keyframes bodyUndulate {
    0%, 100% { d: path("M130,280 C130,190 230,165 350,175 C480,185 620,260 740,345 C770,365 780,405 745,430 C700,460 550,445 420,415 C280,395 180,390 130,330 C110,310 110,295 130,280 Z"); }
    50% { d: path("M130,285 C130,195 230,170 350,180 C480,190 620,270 735,355 C765,375 775,415 740,440 C695,470 545,455 415,425 C275,405 175,400 130,340 C110,320 110,300 130,285 Z"); }
}

.tail-section {
    transform-origin: 745px 390px;
    animation: tailSwing 3s ease-in-out infinite;
}

@keyframes tailSwing {
    0%, 100% { transform: rotate(0deg) translateY(0); }
    50% { transform: rotate(-10deg) translateY(5px); }
}

.pectoral-fin {
    transform-origin: 310px 410px;
    animation: finWaver 5s ease-in-out infinite;
}

@keyframes finWaver {
    0%, 100% { transform: rotate(0deg); }
    50% { transform: rotate(12deg); }
}

/* GOOGLE UI OVERRIDES */
body, .appbar, #hdtb, #hdtbSum {
  background: transparent !important;
  color: var(--text-main) !important;
}

/* Make main containers glass */
/* Robust selectors for search results and panels */
#searchform, 
#rcnt, 
.g, 
.MjjYud, 
div[data-hveid], 
div[jscontroller], 
.yuRUbf, 
.gWMDob, 
.kp-blk, 
.c-container, 
[role="main"] > div {
  background: var(--glass-panel) !important;
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  border: 1px solid var(--glass-border) !important;
  border-radius: var(--radius) !important;
  box-shadow: var(--shadow) !important;
  margin-bottom: 16px;
  padding: 16px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* Exclude common layout containers from glass effect to avoid double-glass */
#center_col, #res, #search {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    backdrop-filter: none !important;
}

/* Hover effects for search results */
.g:hover, .MjjYud:hover, div[data-hveid]:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 40px rgba(0,0,0,0.2) !important;
  border-color: var(--accent) !important;
}

/* Search Input Bar */
.RNNXgb, .emcav, form[role="search"] {
  background: rgba(255, 255, 255, 0.15) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 20px rgba(0,0,0,0.1) !important;
  border-radius: 24px !important;
}

textarea, input {
  color: var(--text-main) !important;
}

/* Links */
a, cite, .BreadpT {
  color: var(--accent) !important;
  text-decoration: none;
}

/* Secondary text */
.VwiC3b, .s, .st, .f, .kt, span {
  color: var(--text-muted) !important;
}

/* Hide annoying white backgrounds */
.mw, .rfjfwb, .hdtb-mitem.hdtb-msel, #cnt, #sfcnt {
  background: transparent !important;
}

/* Logo filtering */
html:not([data-theme="apple"]) .lnXdpd, 
html:not([data-theme="apple"]) .jfN4p,
html:not([data-theme="apple"]) img[alt="Google"] {
  filter: invert(1) hue-rotate(180deg) brightness(2);
}
